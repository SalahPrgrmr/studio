{
  "entities": {
    "Volunteer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Volunteer",
      "type": "object",
      "description": "Represents a volunteer contributing to the platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the volunteer."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the volunteer."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the volunteer."
        },
        "email": {
          "type": "string",
          "description": "Email address of the volunteer.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the volunteer."
        },
        "address": {
          "type": "string",
          "description": "Address of the volunteer."
        },
        "availability": {
          "type": "string",
          "description": "Volunteer's availability (e.g., days of the week, hours)."
        },
        "skills": {
          "type": "array",
          "description": "List of skills the volunteer possesses.",
          "items": {
            "type": "string"
          }
        },
        "interests": {
          "type": "array",
          "description": "Volunteer's interests related to the platform's mission.",
          "items": {
            "type": "string"
          }
        },
        "notes": {
          "type": "string",
          "description": "Any notes about the volunteer (e.g., special needs, past experience)."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "availability"
      ]
    },
    "Member": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Member",
      "type": "object",
      "description": "Represents a registered member of the platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the member."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the member."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the member."
        },
        "email": {
          "type": "string",
          "description": "Email address of the member.",
          "format": "email"
        },
        "joinDate": {
          "type": "string",
          "description": "Date when the member joined the platform.",
          "format": "date-time"
        },
        "interests": {
          "type": "array",
          "description": "Member's interests related to the platform's mission.",
          "items": {
            "type": "string"
          }
        },
        "communityForumPosts": {
          "type": "array",
          "description": "References to CommunityForumPost. (Relationship: Member 1:N CommunityForumPost)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "joinDate"
      ]
    },
    "Partner": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Partner",
      "type": "object",
      "description": "Represents an organization partnering with the platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the partner organization."
        },
        "name": {
          "type": "string",
          "description": "Name of the partner organization."
        },
        "description": {
          "type": "string",
          "description": "Description of the partner organization."
        },
        "website": {
          "type": "string",
          "description": "Website URL of the partner organization.",
          "format": "uri"
        },
        "contactEmail": {
          "type": "string",
          "description": "Contact email address for the partner organization.",
          "format": "email"
        },
        "partnershipStartDate": {
          "type": "string",
          "description": "Date when the partnership started.",
          "format": "date-time"
        },
        "partnershipEndDate": {
          "type": "string",
          "description": "Date when the partnership is scheduled to end (if applicable).",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "contactEmail",
        "partnershipStartDate"
      ]
    },
    "Participant": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Participant",
      "type": "object",
      "description": "Represents a participant in a platform event or activity.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the participant."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the participant."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the participant."
        },
        "email": {
          "type": "string",
          "description": "Email address of the participant.",
          "format": "email"
        },
        "eventId": {
          "type": "string",
          "description": "Reference to Event. (Relationship: Event 1:N Participant)"
        },
        "registrationDate": {
          "type": "string",
          "description": "Date when the participant registered for the event.",
          "format": "date-time"
        },
        "feedback": {
          "type": "string",
          "description": "Feedback provided by the participant after the event."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "eventId",
        "registrationDate"
      ]
    },
    "CommunityForumPost": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CommunityForumPost",
      "type": "object",
      "description": "Represents a post in the community forum.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the forum post."
        },
        "memberId": {
          "type": "string",
          "description": "Reference to Member. (Relationship: Member 1:N CommunityForumPost)"
        },
        "title": {
          "type": "string",
          "description": "Title of the forum post."
        },
        "content": {
          "type": "string",
          "description": "Content of the forum post."
        },
        "postDate": {
          "type": "string",
          "description": "Date and time when the post was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "memberId",
        "title",
        "content",
        "postDate"
      ]
    },
    "Event": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Event",
      "type": "object",
      "description": "Represents an event hosted by the platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the event."
        },
        "name": {
          "type": "string",
          "description": "Name of the event."
        },
        "description": {
          "type": "string",
          "description": "Description of the event."
        },
        "location": {
          "type": "string",
          "description": "Location of the event."
        },
        "startTime": {
          "type": "string",
          "description": "Starting time of the event.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "Ending time of the event.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "startTime",
        "endTime"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/volunteers/{volunteerId}",
        "definition": {
          "entityName": "Volunteer",
          "schema": {
            "$ref": "#/backend/entities/Volunteer"
          },
          "description": "Stores volunteer information. Accessible only to authenticated users who own the volunteer data or have admin privileges (not defined in schema but assumed).",
          "params": [
            {
              "name": "volunteerId",
              "description": "Unique identifier for the volunteer document."
            }
          ]
        }
      },
      {
        "path": "/members/{memberId}",
        "definition": {
          "entityName": "Member",
          "schema": {
            "$ref": "#/backend/entities/Member"
          },
          "description": "Stores member information. Accessible only to the member themselves or admins.",
          "params": [
            {
              "name": "memberId",
              "description": "Unique identifier for the member document."
            }
          ]
        }
      },
      {
        "path": "/partners/{partnerId}",
        "definition": {
          "entityName": "Partner",
          "schema": {
            "$ref": "#/backend/entities/Partner"
          },
          "description": "Stores partner organization information. Accessible to authorized platform administrators.",
          "params": [
            {
              "name": "partnerId",
              "description": "Unique identifier for the partner organization document."
            }
          ]
        }
      },
      {
        "path": "/events/{eventId}/participants/{participantId}",
        "definition": {
          "entityName": "Participant",
          "schema": {
            "$ref": "#/backend/entities/Participant"
          },
          "description": "Stores participant information for each event. Includes denormalized 'eventId' for authorization. Access controlled based on event membership (not explicitly defined in schema).",
          "params": [
            {
              "name": "eventId",
              "description": "Unique identifier for the event."
            },
            {
              "name": "participantId",
              "description": "Unique identifier for the participant document."
            }
          ]
        }
      },
      {
        "path": "/community_forum_posts/{postId}",
        "definition": {
          "entityName": "CommunityForumPost",
          "schema": {
            "$ref": "#/backend/entities/CommunityForumPost"
          },
          "description": "Stores community forum posts. Includes denormalized 'memberId' to track the post's author.  Authorization can be extended using a members map if collaborative editing is required (not shown in schema).",
          "params": [
            {
              "name": "postId",
              "description": "Unique identifier for the forum post."
            }
          ]
        }
      },
      {
        "path": "/events/{eventId}",
        "definition": {
          "entityName": "Event",
          "schema": {
            "$ref": "#/backend/entities/Event"
          },
          "description": "Stores event information. Access controlled based on event organizers or platform admins (not defined in schema).",
          "params": [
            {
              "name": "eventId",
              "description": "Unique identifier for the event."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to manage volunteers, members, partners, participants, community forum posts, and events for the Certainty Path platform. It prioritizes authorization independence and efficient data retrieval, following the core design principles outlined. The structure incorporates path-based ownership and membership maps where appropriate, and it avoids `get()` calls in security rules by denormalizing relevant authorization data. \n\n**Authorization Independence:** Access control is enforced at each collection level without relying on parent document data. For example, access to user-specific data is controlled via path-based rules (`/users/{userId}/volunteers/{volunteerId}`). Collaborative data like the community forum can use a membership map within documents, allowing secure access without complex hierarchical rules. Event participants are linked to specific events via `eventId` which allows participants list reads to be secured by event-level membership, when needed.\n\n**Structural Segregation:** Data with different access requirements is stored in separate collections to simplify security rules. For example, volunteers are stored separately from members, partners, and participants, as they likely require different access controls. This approach ensures a homogeneous security posture within each collection.\n\n**Access Modeling:** User-owned data is structured using hierarchical paths (`/users/{userId}/drafts/{draftId}`). Collaborative data uses a membership map (e.g., if Events had collaborative aspects, a `members` map could be added to grant edit access). Global roles are managed through dedicated collections (not explicitly defined in the current entities, but can be added, e.g., `/roles_admin/{uid}`).\n\n**QAPs Support:** The structure facilitates secure `list` operations through structural segregation and the use of membership maps. For instance, listing volunteers associated with a specific user is secured by the `/users/{userId}/volunteers` path. Listing events with participant data can be secured by limiting access to participants based on event-level authorization, if needed (e.g., only members of the event can view the participant list).\n"
  }
}